/* ── Google Fonts ────────────────────────────────────────────────────────────── */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap');

/* ── Variables ───────────────────────────────────────────────────────────────── */
:root {
  --bg: #0f0a0f;
  --surface: #1a0f1a;
  --surface2: #221422;
  --border: #3d1f3d;
  --border-light: rgba(255,150,180,0.15);

  --rose: #ff6b9d;
  --rose-light: #ff9eb5;
  --gold: #ffd700;
  --gold-light: #ffe566;
  --cream: #fff0f5;

  --correct: #2ecc71;
  --correct-bg: #1a5c36;
  --present: #f39c12;
  --present-bg: #614008;
  --absent: #4a3a4a;
  --absent-text: #888;

  --text: #fff0f5;
  --text-dim: #c49caf;

  --radius: 8px;
  --radius-lg: 16px;
  --shadow: 0 8px 32px rgba(255,107,157,0.15);
  --shadow-lg: 0 20px 60px rgba(255,107,157,0.25);

  --font-display: 'Playfair Display', serif;
  --font-body: 'DM Sans', sans-serif;
}

/* ── Reset ───────────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 16px; }

body {
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

/* ── Background ──────────────────────────────────────────────────────────────── */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 12px 24px;
  position: relative;
  overflow: hidden;
}

.bg-blob {
  position: fixed;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.18;
  pointer-events: none;
  z-index: 0;
}
.blob1 {
  width: 500px; height: 500px;
  background: radial-gradient(circle, #ff6b9d, #c0006a);
  top: -120px; left: -150px;
  animation: floatBlob 12s ease-in-out infinite;
}
.blob2 {
  width: 400px; height: 400px;
  background: radial-gradient(circle, #ffd700, #ff8c00);
  top: 40%; right: -100px;
  animation: floatBlob 15s ease-in-out infinite reverse;
}
.blob3 {
  width: 350px; height: 350px;
  background: radial-gradient(circle, #c084fc, #7c3aed);
  bottom: -80px; left: 20%;
  animation: floatBlob 18s ease-in-out infinite 3s;
}

@keyframes floatBlob {
  0%, 100% { transform: translate(0,0) scale(1); }
  33% { transform: translate(30px,-20px) scale(1.05); }
  66% { transform: translate(-20px, 15px) scale(0.95); }
}

/* ── Header ──────────────────────────────────────────────────────────────────── */
.header {
  width: 100%;
  max-width: 600px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 0 12px;
  position: relative;
  z-index: 10;
  border-bottom: 1px solid var(--border-light);
  margin-bottom: 12px;
  gap: 8px;
}

.logo {
  font-family: var(--font-display);
  font-size: clamp(1.8rem, 6vw, 2.8rem);
  font-weight: 900;
  letter-spacing: 4px;
  display: flex;
  gap: 2px;
  user-select: none;
}

.logo span { display: inline-block; animation: dropIn 0.6s cubic-bezier(.34,1.56,.64,1) both; }
.logo-w  { color: #ff6b9d; animation-delay: 0.05s; }
.logo-o  { color: #ff9eb5; animation-delay: 0.10s; }
.logo-r  { color: #ffd700; animation-delay: 0.15s; }
.logo-d  { color: #ff9eb5; animation-delay: 0.20s; }
.logo-l  { color: #ff6b9d; animation-delay: 0.25s; }
.logo-e  { color: #c084fc; animation-delay: 0.30s; }
.logo-heart {
  color: #ff6b9d;
  animation-delay: 0.35s;
  font-size: 70%;
  align-self: center;
  animation: dropIn 0.6s cubic-bezier(.34,1.56,.64,1) both 0.35s, heartbeat 2s ease-in-out infinite 1s;
}

@keyframes dropIn {
  from { opacity: 0; transform: translateY(-20px) scale(0.8); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.header-left, .header-right {
  display: flex;
  align-items: center;
  min-width: 90px;
}
.header-right { justify-content: flex-end; }

/* ── Buttons ─────────────────────────────────────────────────────────────────── */
.btn {
  font-family: var(--font-body);
  font-weight: 600;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(.34,1.56,.64,1);
  white-space: nowrap;
  letter-spacing: 0.3px;
  outline: none;
  position: relative;
  z-index: 1;
}
.btn:active { transform: scale(0.95) !important; }
.btn--primary {
  background: linear-gradient(135deg, #ff6b9d, #ff4488);
  color: #fff;
  padding: 12px 28px;
  font-size: 1rem;
  box-shadow: 0 4px 20px rgba(255,107,157,0.4);
}
.btn--primary:hover { transform: translateY(-2px) scale(1.03); box-shadow: 0 8px 28px rgba(255,107,157,0.5); }
.btn--spicy {
  background: linear-gradient(135deg, #ff6b35, #ff4444);
  color: #fff;
  padding: 12px 28px;
  font-size: 1rem;
  box-shadow: 0 4px 20px rgba(255,68,68,0.4);
}
.btn--spicy:hover { transform: translateY(-2px) scale(1.03); }
.btn--ghost {
  background: transparent;
  color: var(--text-dim);
  border: 1px solid var(--border);
  padding: 10px 20px;
  font-size: 0.9rem;
}
.btn--ghost:hover { border-color: var(--rose); color: var(--rose); }
.btn--sm { padding: 7px 14px; font-size: 0.78rem; }

/* ── Length Picker ───────────────────────────────────────────────────────────── */
.length-picker {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 16px;
  flex-wrap: wrap;
  justify-content: center;
  position: relative;
  z-index: 10;
}
.length-label {
  font-size: 0.75rem;
  color: var(--text-dim);
  font-weight: 500;
  letter-spacing: 0.5px;
}
.length-btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text-dim);
  border-radius: 50%;
  width: 32px; height: 32px;
  font-family: var(--font-body);
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  display: flex; align-items: center; justify-content: center;
}
.length-btn:hover { border-color: var(--rose); color: var(--rose); }
.length-btn--active {
  background: linear-gradient(135deg, #ff6b9d, #ff4488);
  border-color: transparent;
  color: #fff;
  box-shadow: 0 2px 12px rgba(255,107,157,0.4);
  transform: scale(1.1);
}

/* ── Grid ────────────────────────────────────────────────────────────────────── */
.grid {
  display: flex;
  flex-direction: column;
  gap: clamp(4px, 1.2vw, 8px);
  margin-bottom: 20px;
  position: relative;
  z-index: 10;
}

.grid-row {
  display: flex;
  gap: clamp(4px, 1.2vw, 8px);
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  15% { transform: translateX(-8px); }
  30% { transform: translateX(8px); }
  45% { transform: translateX(-6px); }
  60% { transform: translateX(6px); }
  75% { transform: translateX(-4px); }
  90% { transform: translateX(4px); }
}
.shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97); }

/* ── Tile ────────────────────────────────────────────────────────────────────── */
.tile {
  perspective: 250px;
  user-select: none;
}
.tile--big  { width: clamp(44px, 11vw, 64px); height: clamp(44px, 11vw, 64px); }
.tile--med  { width: clamp(38px, 9.5vw, 56px); height: clamp(38px, 9.5vw, 56px); }
.tile--sm   { width: clamp(30px, 7.5vw, 46px); height: clamp(30px, 7.5vw, 46px); }

.tile-inner {
  width: 100%; height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.45s cubic-bezier(.55,0,.45,1);
  transition-delay: var(--reveal-delay, 0ms);
}
.tile--revealed .tile-inner { transform: rotateX(180deg); }

.tile-front, .tile-back {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-body);
  font-weight: 700;
  font-size: clamp(1rem, 3.5vw, 1.6rem);
  border-radius: var(--radius);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.tile-front {
  background: var(--surface2);
  border: 2px solid var(--border);
  color: var(--text);
  transition: border-color 0.1s;
}
.tile--filled .tile-front {
  border-color: var(--rose);
  animation: pop 0.1s cubic-bezier(.34,1.56,.64,1);
}
@keyframes pop {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.12); }
  100% { transform: scale(1); }
}

.tile-back {
  transform: rotateX(180deg);
  border: 2px solid transparent;
}
.tile--correct .tile-back  { background: var(--correct-bg); border-color: #2ecc71; color: #fff; }
.tile--present .tile-back  { background: var(--present-bg); border-color: #f39c12; color: #fff; }
.tile--absent  .tile-back  { background: #2a1e2a; border-color: var(--absent); color: var(--absent-text); }

/* ── Keyboard ────────────────────────────────────────────────────────────────── */
.keyboard {
  display: flex;
  flex-direction: column;
  gap: 6px;
  position: relative;
  z-index: 10;
  width: 100%;
  max-width: 500px;
}
.keyboard-row {
  display: flex;
  justify-content: center;
  gap: 5px;
}

.key {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: clamp(0.7rem, 2.5vw, 0.9rem);
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 6px;
  height: clamp(44px, 7vw, 56px);
  min-width: clamp(28px, 7.5vw, 44px);
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex; align-items: center; justify-content: center;
  touch-action: manipulation;
  outline: none;
}
.key--wide {
  min-width: clamp(48px, 12vw, 68px);
  font-size: clamp(0.55rem, 1.8vw, 0.78rem);
}
.key:hover:not(:disabled) { background: #2e1e2e; border-color: var(--rose); transform: translateY(-2px); }
.key:active:not(:disabled) { transform: translateY(0) scale(0.95); }
.key:disabled { opacity: 0.5; cursor: not-allowed; }

.key--correct { background: var(--correct-bg) !important; border-color: var(--correct) !important; color: #fff !important; }
.key--present { background: var(--present-bg) !important; border-color: var(--present) !important; color: #fff !important; }
.key--absent  { background: #1e141e !important; border-color: #2a1e2a !important; color: #555 !important; }

/* ── Popup Overlay ───────────────────────────────────────────────────────────── */
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.popup {
  background: linear-gradient(145deg, #1e0e24, #2a1230);
  border: 1px solid rgba(255,107,157,0.3);
  border-radius: 24px;
  padding: clamp(24px, 5vw, 48px);
  text-align: center;
  width: 100%;
  max-width: 380px;
  box-shadow: 0 0 0 1px rgba(255,107,157,0.1), 0 40px 80px rgba(0,0,0,0.6), 0 0 80px rgba(255,107,157,0.1);
  animation: popupIn 0.4s cubic-bezier(.34,1.56,.64,1);
  position: relative;
}
@keyframes popupIn {
  from { transform: scale(0.7) translateY(30px); opacity: 0; }
  to   { transform: scale(1) translateY(0); opacity: 1; }
}

.popup--custom { max-width: 420px; }

.popup-emoji {
  font-size: clamp(2.5rem, 8vw, 4rem);
  margin-bottom: 12px;
  display: block;
  animation: bounceIn 0.5s cubic-bezier(.34,1.56,.64,1) 0.2s both;
}
@keyframes bounceIn {
  from { transform: scale(0); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

.popup-title {
  font-family: var(--font-display);
  font-size: clamp(1.5rem, 5vw, 2rem);
  font-weight: 900;
  color: var(--rose-light);
  margin-bottom: 12px;
  line-height: 1.2;
}
.popup-title.spicy {
  background: linear-gradient(135deg, #ff6b35, #ff4444);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.popup-sub {
  color: var(--text-dim);
  font-size: 0.95rem;
  margin-bottom: 16px;
  font-weight: 400;
}

.popup-word {
  font-size: 1rem;
  color: var(--text-dim);
  margin-bottom: 24px;
}
.popup-word-highlight {
  font-family: var(--font-display);
  font-size: 1.4rem;
  font-weight: 900;
  color: var(--gold);
  letter-spacing: 4px;
  display: block;
  margin-top: 8px;
}

.popup-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

/* ── Custom Word Input ───────────────────────────────────────────────────────── */
.custom-input {
  width: 100%;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 12px;
  color: var(--text);
  font-family: var(--font-body);
  font-size: 1.1rem;
  font-weight: 600;
  padding: 14px 20px;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 4px;
  margin-bottom: 12px;
  outline: none;
  transition: border-color 0.2s;
}
.custom-input:focus { border-color: var(--rose); }
.custom-input::placeholder { letter-spacing: 1px; font-weight: 400; opacity: 0.5; text-transform: none; }

.custom-error {
  color: #ff6b6b;
  font-size: 0.85rem;
  margin-bottom: 12px;
  font-weight: 500;
}

/* ── Toast ───────────────────────────────────────────────────────────────────── */
.toast {
  position: fixed;
  top: 90px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,107,157,0.95);
  color: #fff;
  padding: 10px 24px;
  border-radius: 50px;
  font-weight: 600;
  font-size: 0.9rem;
  z-index: 500;
  animation: toastIn 0.3s cubic-bezier(.34,1.56,.64,1);
  white-space: nowrap;
  box-shadow: 0 4px 20px rgba(255,107,157,0.4);
}
@keyframes toastIn {
  from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* ── Loading ─────────────────────────────────────────────────────────────────── */
.loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  flex: 1;
  min-height: 300px;
  position: relative;
  z-index: 10;
}
.loading-heart {
  font-size: 3rem;
  color: var(--rose);
  animation: heartbeat 1s ease-in-out infinite;
}
.loading p {
  color: var(--text-dim);
  font-size: 0.95rem;
  font-weight: 500;
}

/* ── Confetti ────────────────────────────────────────────────────────────────── */
.confetti-piece {
  position: fixed;
  top: -20px;
  border-radius: 3px;
  z-index: 900;
  pointer-events: none;
  animation: confettiFall 2.5s cubic-bezier(.21,.96,.52,1.3) forwards;
}
@keyframes confettiFall {
  0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
  80%  { opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}

/* ── Responsive ──────────────────────────────────────────────────────────────── */
@media (max-width: 400px) {
  .header { padding: 14px 0 10px; }
  .key { height: 40px; }
  .popup { padding: 24px 20px; }
  .length-picker { gap: 4px; }
  .length-btn { width: 28px; height: 28px; font-size: 0.72rem; }
}

@media (min-height: 800px) {
  .grid { gap: 8px; }
  .keyboard { gap: 8px; }
  .keyboard-row { gap: 6px; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
